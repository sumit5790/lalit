pipeline {
    agent none
    stages {
        stage('Back-end') {
            agent { 
    docker {
        image '172.31.30.63:5000/maven'
        registryUrl 'https://172.31.30.63:5000'
        registryCredentialsId 'private-docker'
        args '-v /var/jenkins_home/.m2:/root/.m2'
    }

}
            steps {
                sh 'mvn --version'
            }
        }
        stage('Front-end') {
            agent {
    dockerfile {
        filename 'Dockerfile'
        dir 'build'
        
        registryUrl 'https://172.31.30.63:5000'
        registryCredentialsId 'private-docker'
    }
}
            steps {
                sh 'node --version'
            }
        }
    }
}
