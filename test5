pipeline {
    agent none
    stages {
        stage('Back-end') {
            agent { 
    docker {
        image 'registry.az1:5043/maven-proto'
        registryUrl 'https://172.31.30.63:5000'
        registryCredentialsId 'credentials-id'
        args '-v /var/jenkins_home/.m2:/root/.m2'
    }

}
            steps {
                sh 'mvn --version'
            }
        }
        stage('Front-end') {
            agent {
    dockerfile {
        filename 'Dockerfile.build'
        dir 'build'
        label 'docker_file'
        registryUrl 'https://172.31.30.63:5000'
        registryCredentialsId 'credentials-id'
    }
}
            steps {
                sh 'node --version'
            }
        }
    }
}
