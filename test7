pipeline{
         agent none
		 stages{
		    stage('build'){
			      agent{
                            docker{
							image '172.31.30.63:5000/maven'
				              registryUrl 'https://172.31.30.63:5000'
	                            registryCredentialsId 'private-docker'
	                            args '-v /root/.m2:/root/.m2'				  
                         }				  
				  }
			
			}
			
			stage('skiptest'){
			  
			         steps{
					    sh 'mvn -B -DskipTests clean package'
					 }
			}
			
			stage('Front-end') {
            agent {
                        dockerfile {
                                   filename 'Dockerfile'
                                   dir 'build'
                                   label 'docker_file'
                                   registryUrl 'https://172.31.30.63:5000'
                                   registryCredentialsId 'credentials-id'
    }
	}		
		} 
		 
		 }
		 

}
